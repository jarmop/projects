<h4>Ateria</h4>
<meal-foods></meal-foods>
<table class="table table-sm">
    <tbody>
    <template ngFor #food [ngForOf]="mealFoods">
        <tr *ngIf="!editMode(food)" (click)="openEdit(food)">
            <td class="name">
                {{food.name}}
            </td>
            <td class="amount">
                {{food.amount}} g
            </td>
        </tr>
        <tr *ngIf="editMode(food)" class="tr-form">
            <td colspan="2">
                <form class="form-inline">
                    <input type="text" value="{{food.name}}" class="form-control name">
                    <fieldset class="form-group">
                        <input type="text" value="{{food.amount}}" class="form-control amount">
                        <select class="form-control measure">
                            <option>g</option>
                            <option>ml</option>
                        </select>
                    </fieldset>
                    <div class="actions">
                        <button (click)="save(food)" class="btn btn-sm btn-success" type="button">
                            <i class="fa fa-check"></i>
                        </button>
                        <button (click)="save(food)" class="btn btn-sm btn-secondary" type="button">
                            <i class="fa fa-remove" aria-hidden="true"></i>
                        </button>
                        <button (click)="remove(food)" class="btn btn-sm btn-danger pull-right" type="button">
                            <i class="fa fa-trash-o" aria-hidden="true"></i>
                        </button>
                    </div>
                </form>
            </td>
        </tr>
    </template>
    <tr [ngClass]="{'tr-form': isAddOpen}">
        <td colspan="2">
            <div class="add-food">
                <a *ngIf="!isAddOpen" (click)="openAdd($event, test)" role="button">Lisää ruoka</a>
                <form *ngIf="isAddOpen" class="form-inline" #addForm="ngForm">
                    <input type="text" id="add-name" class="form-control name" required [(ngModel)]="addForm.name"
                           ngControl="name" placeholder="ruoka">
                    <fieldset class="form-group">
                        <input type="text" value="{{addAmount}}" class="form-control amount" required [(ngModel)]="addForm.amount"
                               ngControl="amount" placeholder="0">
                        <select class="form-control measure">
                            <option>g</option>
                            <option>ml</option>
                        </select>
                    </fieldset>
                    <div class="actions">
                        <button (click)="saveAdd()" class="btn btn-sm btn-success" type="button" [disabled]="!addForm.form.valid">
                            <i class="fa fa-check"></i>
                        </button>
                        <button (click)="closeAdd()" class="btn btn-sm btn-secondary" type="button">
                            <i class="fa fa-remove" aria-hidden="true"></i>
                        </button>
                    </div>
                </form>
            </div>
        </td>
    </tr>
    </tbody>
</table>